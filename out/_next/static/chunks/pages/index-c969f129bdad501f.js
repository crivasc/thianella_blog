(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(1105)}])},1105:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return W}});var n=a(5893),s=a(6979),o=a(7294),r=a(7350),i=a(3100),l=a(7306),c=a(8129),d=a(1753),u=a(8691),h=a(9222),x=a(3977),g=a(1259),p=a(9828);let f=(0,x.ZF)({apiKey:"AIzaSyCrKueXxR-xk7KqaCP6WWwHlaD5lGJ9ASA",authDomain:"thianella-42f63.firebaseapp.com",databaseURL:"https://thianella-42f63-default-rtdb.firebaseio.com",projectId:"thianella-42f63",storageBucket:"thianella-42f63.appspot.com",messagingSenderId:"1029883663033",appId:"1:1029883663033:web:ecd443ed9250ad26488168"}),m=(0,g.v0)(f),j=(0,p.ad)(f),b=()=>{let[e,t]=(0,o.useState)(null),[a,n]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{m.onAuthStateChanged(e=>{n(!!e&&!!e.uid),t(e)})}),{user:e,isLoggedIn:a}},w=async e=>{let{userId:t,title:a,description:n,status:s}=e;try{await (0,p.ET)((0,p.hJ)(j,"todo"),{user:t,title:a,description:n,status:s,createdAt:new Date().getTime()})}catch(e){}},C=async e=>{let{docId:t,status:a}=e;try{let e=(0,p.JU)(j,"todo",t);await (0,p.r7)(e,{status:a})}catch(e){console.log(e)}},y=async e=>{try{let t=(0,p.JU)(j,"todo",e);await (0,p.oe)(t)}catch(e){console.log(e)}},k=()=>{let[e,t]=(0,o.useState)(""),[a,s]=(0,o.useState)(""),[x,g]=(0,o.useState)("pendiente"),[p,f]=(0,o.useState)(!1),m=(0,r.p)(),{isLoggedIn:j,user:C}=b(),y=async()=>{if(!j){m({title:"Debe loguearse para crear una nota",status:"error",duration:9e3,isClosable:!0});return}f(!0);let n={title:e,description:a,status:x,userId:C.uid};await w(n),f(!1),t(""),s(""),g("pendiente"),m({title:"nota creada",status:"success"})};return(0,n.jsx)(i.xu,{w:"40%",margin:"0 auto",display:"block",mt:5,children:(0,n.jsxs)(l.K,{direction:"column",children:[(0,n.jsx)(c.I,{placeholder:"Title",value:e,onChange:e=>t(e.target.value)}),(0,n.jsx)(d.g,{placeholder:"Description",value:a,onChange:e=>s(e.target.value)}),(0,n.jsxs)(u.P,{value:x,onChange:e=>g(e.target.value),children:[(0,n.jsx)("option",{value:"pendiente",style:{color:"yellow",fontWeight:"bold"},children:"Pendiente"}),(0,n.jsx)("option",{value:"completado",style:{color:"green",fontWeight:"bold"},children:"Completado"})]}),(0,n.jsx)(h.z,{onClick:()=>y(),disabled:e.length<1||a.length<1||p,variantcolor:"teal",variant:"solid",children:"Add"})]})})};var v=a(2498),S=a(8911),_=a(3838),E=a(9583);let I=()=>{let{toggleColorMode:e,colorMode:t}=(0,v.If)(),{isLoggedIn:a,user:s}=b(),o=async()=>{let e=new g.hJ;(0,g.rh)(m,e).then(e=>{let t=g.hJ.credentialFromResult(e);t.accessToken,e.user}).catch(e=>{e.code,e.message,e.customData.email,g.hJ.credentialFromError(e)})};return(0,n.jsxs)(i.xu,{position:"fixed",top:"5%",right:"5%",children:[(0,n.jsx)(h.z,{onClick:()=>e(),children:"dark"==t?(0,n.jsx)(E.Mei,{}):(0,n.jsx)(E.TLr,{})}),"",a&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(S.x,{color:"greem.500",children:s.email}),(0,n.jsx)(_.r,{color:"red.500",onClick:()=>m.signOut(),children:"Logout"})]}),!a&&(0,n.jsx)(h.z,{leftIcon:(0,n.jsx)(E.ldW,{}),onClick:()=>o(),children:"Login con Google"})]})};var J=a(6137),T=a(4418),z=a(1689);let N=()=>{let[e,t]=(0,o.useState)([]),{user:a}=b(),s=(0,r.p)(),l=()=>{if(!a){t([]);return}let e=(0,p.IO)((0,p.hJ)(j,"todo"),(0,p.ar)("user","==",a.uid));(0,p.cf)(e,e=>{let a=[];e.docs.forEach(e=>{a.push({id:e.id,...e.data()})}),t(a)})};(0,o.useEffect)(()=>{l()},[a]);let c=async e=>{confirm("\xbfSeguro que desea eliminar nota?")&&(y(e),s({title:"Nota borrada",status:"success"}))},d=async(e,t)=>{let a="completado"==t?"pendiente":"completado";await C({docId:e,status:a}),s({title:"Todo marked ".concat(a),status:"completado"==a?"success":"warning"})};return(0,n.jsx)(i.xu,{mt:5,children:(0,n.jsx)(J.M,{columns:{base:1,md:3},spacing:8,children:e&&e.map(e=>(0,n.jsxs)(i.xu,{p:3,boxShadow:"2xl",shadow:"dark-lg",transition:"0.2s",_hover:{boxShadow:"sm"},children:[(0,n.jsxs)(T.X,{as:"h3",fontSize:"xl",children:[e.title,"",(0,n.jsx)(z.C,{color:"red.500",bg:"inherit",transition:"0.2s",_hover:{bg:"inherit",transform:"scale(1.2)"},float:"right",size:"xs",onClick:()=>c(e.id),children:(0,n.jsx)(E.Xm5,{})}),(0,n.jsx)(z.C,{color:"pendiente"==e.status?"gray.500":"green.500",bg:"inherit",transition:"0.2s",_hover:{bg:"inherit",transform:"scale(1.2)"},float:"right",size:"xs",onClick:()=>d(e.id,e.status),children:"pendiente"==e.status?(0,n.jsx)(E.uYB,{}):(0,n.jsx)(E.NCu,{})}),(0,n.jsx)(z.C,{float:"right",opacity:"0.8",bg:"pendiente"==e.status?"yellow.500":"green.500",children:e.status})]}),(0,n.jsx)(S.x,{children:e.description})]},e.id))})})};function W(){return(0,n.jsxs)(s.W,{maxW:"7xl",children:[(0,n.jsx)(I,{}),(0,n.jsx)(k,{}),(0,n.jsx)(N,{})]})}}},function(e){e.O(0,[445,16,278,966,774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);